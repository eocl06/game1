<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
    <link as="style" href="https://fonts.googleapis.com/css2?display=swap&family=Lexend%3Awght%40400%3B500%3B600%3B700%3B800%3B900&family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" onload="this.rel='stylesheet'" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <title>NewsSwipe - Verify News</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
        /* ... (Önceki yanıttaki gibi tüm stiller buraya gelecek) ... */
        .material-icons, .material-icons-outlined { font-size: 28px; vertical-align: middle; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; font-size: 24px; vertical-align: middle; }
        .btn-primary { background-color: #3B82F6; color: white; }
        .btn-secondary { background-color: #E5E7EB; color: #1F2937; }
        .lexend-font { font-family: 'Lexend', "Noto Sans", sans-serif; }
        .card-gradient { background-image: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 70%, rgba(0, 0, 0, 0.8) 100%); }
        .primary-color-text { color: #0c7ff2; } 
        .primary-color-bg { background-color: #0c7ff2; } 
        .fake-news-button { background-color: #FF3B30; }
        .real-news-button { background-color: #34C759; }
        .news-button-disabled { opacity: 0.6; pointer-events: none; }
        .correct-feedback { background-color: #EBF9F0; border-left: 4px solid #34D399; }
        .incorrect-feedback { background-color: #FEE2E2; border-left: 4px solid #F87171; }
        .status-icon-correct { color: #34D399; }
        .status-icon-incorrect { color: #F87171; }
        .timeup-icon { color: #F59E0B; }
    </style>
</head>
<body class="bg-slate-50 lexend-font">
    <div id="appRoot" class="relative flex size-full min-h-screen flex-col group/design-root overflow-x-hidden">
        <div id="homeScreen" class="flex flex-col min-h-screen">
            <header id="homeHeader" class="bg-white shadow-sm sticky top-0 z-20">
                <div class="container mx-auto px-4 py-3 flex items-center justify-between">
                    <div class="w-10"></div> 
                    <h1 class="text-xl font-bold text-slate-800 text-center">NewsSwipe</h1>
                    <button class="flex items-center justify-center rounded-full h-10 w-10 text-slate-600 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50">
                        <span class="material-icons">settings</span>
                    </button>
                </div>
            </header>
            <main id="homeMain" class="flex-grow container mx-auto px-6 py-8 text-center">
                <div class="max-w-md mx-auto">
                    <img alt="NewsSwipe App Icon" class="w-24 h-24 mx-auto mb-6 rounded-2xl shadow-lg" src="https://lh3.googleusercontent.com/aida-public/AB6AXuA-fyUmZiKE_nHNvrPBkaFU8b7xUACLQqHF6tcg8JvnK5Q6c6jPl3YmzTHiKo_1obIExV7JX4I7-RwqTrwTlDjr3jOk6evMGA_LsZZJqffZTDzErZ_HID38KBy94n4llusld-zy1HQGA6Vh60LEgx5n42La1umYxi6ix0kaC2sMngn_puvstBZscr-hOff8pSDIQZ6mr68JnYKwqbxfEF-BKh-Ra7riGUwcTQ9ACW7YYGk29y9OHCMUBDyMu4TRx8h8D9O5pafdDLfV"/>
                    <h2 class="text-3xl sm:text-4xl font-bold text-slate-800 mb-3">Welcome to NewsSwipe!</h2>
                    <p class="text-lg sm:text-xl text-slate-600 mb-10">Test your news literacy. Swipe left for fake, right for real.</p>
                    <div class="space-y-4">
                        <button id="playNowBtn" class="btn-primary w-full flex items-center justify-center rounded-xl h-14 px-6 text-lg font-semibold shadow-md hover:bg-blue-700 transition-colors duration-150">
                            <span class="material-icons mr-2">play_arrow</span>Play Now
                        </button>
                        <button id="leaderboardBtnHome" class="btn-secondary w-full flex items-center justify-center rounded-xl h-14 px-6 text-lg font-semibold shadow-sm hover:bg-slate-200 transition-colors duration-150">
                            <span class="material-icons mr-2">leaderboard</span>View Scores
                        </button>
                        <button id="howToPlayBtn" class="btn-secondary w-full flex items-center justify-center rounded-xl h-14 px-6 text-lg font-semibold shadow-sm hover:bg-slate-200 transition-colors duration-150">
                            <span class="material-icons mr-2">help_outline</span>How to Play
                        </button>
                    </div>
                </div>
            </main>
            <footer id="homeFooter" class="bg-white border-t border-slate-200 sticky bottom-0 z-20">
                <nav class="container mx-auto px-4 h-16 flex justify-around items-center">
                    <a id="homeNavHome" href="#" class="flex flex-col items-center justify-center text-blue-600 hover:text-blue-700 transition-colors duration-150 p-2 rounded-lg">
                        <span class="material-icons">home</span><span class="text-xs font-medium">Home</span>
                    </a>
                    <a id="homeNavScores" href="#" class="flex flex-col items-center justify-center text-slate-500 hover:text-blue-600 transition-colors duration-150 p-2 rounded-lg">
                        <span class="material-icons">bar_chart</span><span class="text-xs font-medium">Scores</span>
                    </a>
                    <a id="homeNavProfile" href="#" class="flex flex-col items-center justify-center text-slate-500 hover:text-blue-600 transition-colors duration-150 p-2 rounded-lg">
                        <span class="material-icons">person_outline</span><span class="text-xs font-medium">Profile</span>
                    </a>
                </nav>
            </footer>
        </div>

        <div id="gameScreen" class="hidden flex flex-col min-h-screen">
            <div class="relative flex size-full flex-col bg-white group/design-root overflow-x-hidden lexend-font">
                <header class="sticky top-0 z-10 bg-white shadow-sm">
                    <div class="flex items-center p-4 pb-3">
                        <button id="closeGameBtn" class="text-gray-700 flex size-10 shrink-0 items-center justify-center rounded-full hover:bg-gray-100">
                            <span class="material-icons-outlined">close</span>
                        </button>
                        <h1 class="text-gray-900 text-xl font-semibold leading-tight tracking-tight flex-1 text-center pr-10">News Verification</h1>
                    </div>
                    <div class="px-4 pb-3">
                        <div class="flex items-center justify-between mb-1.5">
                            <p class="text-gray-700 text-sm font-medium">Question <span id="currentQuestionDisplay" class="font-bold text-gray-900">1</span>/<span id="totalQuestionsDisplay">3</span></p>
                            <p class="text-gray-700 text-sm font-medium">Score: <span id="scoreDisplay" class="font-bold text-gray-900">0</span></p>
                        </div>
                        <div class="h-2.5 rounded-full bg-gray-200">
                            <div id="progressBar" class="h-2.5 rounded-full primary-color-bg" style="width: 0%;"></div>
                        </div>
                    </div>
                </header>
                <main class="flex-1 overflow-y-auto p-4 space-y-6">
                    <div class="flex gap-3 justify-center">
                        <div class="flex flex-col items-center gap-1.5">
                            <div class="flex h-12 w-12 sm:h-16 sm:w-16 items-center justify-center rounded-lg bg-gray-100 shadow-inner">
                                <p id="timerMinutes" class="text-gray-900 text-2xl sm:text-3xl font-bold">00</p>
                            </div><p class="text-gray-600 text-xs font-medium">Minutes</p>
                        </div>
                        <div class="flex items-center text-gray-400 text-xl sm:text-2xl font-bold pt-1 pb-5">:</div>
                        <div class="flex flex-col items-center gap-1.5">
                            <div class="flex h-12 w-12 sm:h-16 sm:w-16 items-center justify-center rounded-lg bg-gray-100 shadow-inner">
                                <p id="timerSeconds" class="text-gray-900 text-2xl sm:text-3xl font-bold">15</p>
                            </div><p class="text-gray-600 text-xs font-medium">Seconds</p>
                        </div>
                    </div>
                    <div class="relative rounded-2xl overflow-hidden shadow-lg aspect-[3/4] min-h-[280px] sm:min-h-[300px] max-h-[450px] sm:max-h-[500px] mx-auto w-full max-w-sm sm:max-w-md">
                        <img id="newsImage" alt="News article image" class="absolute inset-0 h-full w-full object-cover" src="https://lh3.googleusercontent.com/aida-public/AB6AXuByU9lacn6K_FHOIMxM1uY7HjPdQFZ__M6DvLLXJ6kSOpQMeDOH-BIDmg_Kk9dpr5axSo2stf3VYHOYQQSB42AQjwWn9Lh1lS-lRS2LWGJT_M_RsM2F0veurVNVE6VCQSu65HocXyxr-qS8PiVAmNbkkZ_VyOzOGfwZpdgm4Kb3FeweyldN5OBrNAWl-3bfi6pX2gyS4DliiSgGilkxK-4oN4aY1oS38m9h5OrCJX-IUhm_aFOsjvJwQ_OZutosopo_8IvEzNASr6_0"/>
                        <div class="absolute inset-0 card-gradient flex flex-col justify-end p-3 sm:p-5 space-y-1 sm:space-y-2">
                            <h2 id="newsTitle" class="text-white text-xl sm:text-2xl font-bold leading-tight drop-shadow-md">Haber Başlığı</h2>
                            <p id="newsSnippet" class="text-gray-200 text-xs sm:text-sm font-normal leading-relaxed line-clamp-3 sm:line-clamp-4 drop-shadow-sm">Haber metni...</p>
                            <button id="verifySourceButton" class="text-xs text-white font-medium underline self-start pt-1 opacity-80 hover:opacity-100 transition-opacity">Verify Source</button>
                        </div>
                    </div>
                    <div class="flex justify-around items-center pt-2 space-x-2 sm:space-x-4">
                        <button id="fakeButton" class="flex flex-col items-center justify-center size-16 sm:size-20 rounded-full fake-news-button text-white shadow-md hover:opacity-90 transition-opacity active:scale-95">
                            <span class="material-icons-outlined text-2xl sm:text-3xl">close</span><span class="text-xs font-semibold tracking-wide">FAKE</span>
                        </button>
                        <button id="realButton" class="flex flex-col items-center justify-center size-16 sm:size-20 rounded-full real-news-button text-white shadow-md hover:opacity-90 transition-opacity active:scale-95">
                            <span class="material-icons-outlined text-2xl sm:text-3xl">check</span><span class="text-xs font-semibold tracking-wide">REAL</span>
                        </button>
                    </div>
                </main>
                <nav class="sticky bottom-0 bg-white border-t border-gray-200 pb-safe z-10">
                     <div class="flex justify-around items-center h-16">
                        <a id="gameNavHome" href="#" class="flex flex-col items-center justify-center gap-0.5 text-gray-500 hover:primary-color-text transition-colors w-1/3">
                            <span class="material-icons-outlined text-2xl">cottage</span><span class="text-xs font-medium">Home</span>
                        </a>
                        <a id="gameNavGame" href="#" class="flex flex-col items-center justify-center gap-0.5 primary-color-text hover:primary-color-text transition-colors w-1/3">
                            <span class="material-icons-outlined text-2xl">gamepad</span><span class="text-xs font-medium">Game</span>
                        </a>
                        <a id="gameNavScores" href="#" class="flex flex-col items-center justify-center gap-0.5 text-gray-500 hover:primary-color-text transition-colors w-1/3">
                            <span class="material-icons-outlined text-2xl">leaderboard</span><span class="text-xs font-medium">Scores</span>
                        </a>
                    </div>
                </nav>
            </div>
        </div>

        <div id="howToPlayModal" class="fixed inset-0 bg-slate-800 bg-opacity-75 flex items-center justify-center p-4 hidden z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-slate-800 lexend-font">Nasıl Oynanır?</h3>
                    <button id="closeModalBtn" class="text-slate-500 hover:text-slate-700">
                        <span class="material-icons">close</span>
                    </button>
                </div><div class="text-slate-600 space-y-3 lexend-font">
                    <p>NewsSwipe çok basit!</p>
                    <p>1. Sunulan haber başlığını ve kısa bir özetini okuyun.</p>
                    <p>2. Haberin GERÇEK mi FAKE mi olduğuna karar verin.</p>
                    <p>3. GERÇEK olduğunu düşünüyorsanız REAL butonuna basın.</p>
                    <p>4. FAKE olduğunu düşünüyorsanız FAKE butonuna basın.</p>
                    <p>Haber okuryazarlığınızı test edin ve ne kadar yüksek puan alabileceğinizi görün!</p>
                </div>
            </div>
        </div>

        <div id="timeUpPopup" class="fixed inset-0 bg-slate-800 bg-opacity-75 flex items-center justify-center p-4 hidden z-40">
            <div class="bg-white rounded-lg shadow-xl p-6 sm:p-8 max-w-xs sm:max-w-sm w-full text-center">
                <span class="material-icons-outlined timeup-icon mb-4" style="font-size: 48px;">timer_off</span>
                <h3 class="text-xl sm:text-2xl font-bold text-slate-800 mb-3">Süren Doldu!</h3>
                <p class="text-slate-600 mb-6 text-sm sm:text-base">Bu soru için cevap süreniz sona erdi.</p>
                <button id="timeUpOkButton" class="w-full rounded-full h-11 px-6 bg-[#0b80ee] text-white text-lg font-semibold hover:bg-[#0968c3] transition-colors">Tamam</button>
            </div>
        </div>

        <div id="feedbackScreen" class="hidden bg-slate-50 fixed inset-0 z-30 flex flex-col justify-between overflow-y-auto">
            <header class="sticky top-0 z-10 bg-white shadow-sm">
                <div class="mx-auto flex max-w-3xl items-center justify-end p-3 sm:p-4">
                    <button id="closeFeedbackBtn" class="flex items-center justify-center rounded-full text-slate-700 hover:bg-slate-100 p-2 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2">
                        <span class="material-icons-outlined">close</span>
                    </button>
                </div>
            </header>
            <main class="flex-grow px-4 sm:px-6 py-6 sm:py-8">
                <div class="mx-auto max-w-md text-center">
                    <div class="mb-6 sm:mb-8">
                        <span id="feedbackIcon" class="material-icons-outlined" style="font-size: 56px sm:font-size: 64px;"></span>
                        <h2 id="feedbackTitle" class="mt-3 sm:mt-4 text-2xl sm:text-3xl font-bold text-slate-800"></h2>
                    </div>
                    <div id="feedbackBox" class="rounded-lg bg-white p-5 sm:p-6 shadow-lg mb-6 sm:mb-8"> 
                        <p id="feedbackText" class="text-slate-700 text-sm sm:text-base leading-relaxed"></p>
                    </div>
                    <div id="feedbackSourceSection" class="hidden rounded-lg bg-white p-5 sm:p-6 shadow-lg text-left">
                        <h3 class="text-lg sm:text-xl font-semibold text-slate-800 mb-3">Kaynak İncelemesi</h3>
                        <a id="feedbackSourceLinkTag" class="flex items-center gap-3 text-slate-600 hover:text-blue-600 transition-colors group" href="#" target="_blank" rel="noopener noreferrer">
                            <div class="flex items-center justify-center rounded-lg bg-slate-100 group-hover:bg-blue-50 p-3 shrink-0">
                                <span class="material-icons-outlined text-slate-500 group-hover:text-blue-500">link</span>
                            </div>
                            <p id="feedbackSourceName" class="text-sm sm:text-base font-medium flex-1 truncate"></p>
                            <span class="material-icons-outlined text-slate-400 group-hover:text-blue-500 text-lg">arrow_forward_ios</span>
                        </a>
                    </div>
                </div>
            </main>
            <footer class="sticky bottom-0 bg-white border-t border-slate-200 p-4">
                <div class="mx-auto max-w-md">
                    <button id="feedbackNextButton" class="w-full flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-6 bg-[#0b80ee] text-white text-lg font-semibold leading-normal tracking-[0.015em] hover:bg-[#0968c3] transition-colors focus:outline-none focus:ring-2 focus:ring-[#0b80ee] focus:ring-offset-2">
                        <span class="truncate">Sonraki Soru</span>
                    </button>
                </div>
            </footer>
        </div>
        
        <div id="resultsScreen" class="hidden bg-slate-50 fixed inset-0 z-30 flex flex-col justify-between overflow-y-auto">
            <header class="sticky top-0 z-10 bg-white shadow-sm">
                <div class="mx-auto flex max-w-7xl items-center justify-between p-4">
                    <button id="closeResultsHeaderBtn" class="text-slate-700 hover:text-slate-900 p-2 rounded-full">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                    <h1 class="text-xl font-semibold text-slate-900">Results</h1>
                    <div class="w-8 sm:w-10"></div>
                </div>
            </header>
            <main class="flex-1 overflow-y-auto px-6 py-8">
                <div class="mx-auto max-w-md text-center">
                    <div class="mb-8 rounded-xl bg-white p-6 shadow-lg">
                        <h2 class="text-3xl sm:text-4xl font-bold text-slate-800">Skorun: <span id="finalScoreValue" class="text-blue-600">0/0</span></h2>
                        <p class="mt-2 text-slate-600">Harcanan Süre: <span id="timeTakenValue" class="font-medium text-slate-700">0 dakika 0 saniye</span></p>
                    </div>
                    <div class="rounded-xl bg-white p-6 shadow-lg">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-semibold text-slate-800">Liderlik Tablosu</h3>
                            <span class="material-symbols-outlined text-yellow-500 !text-3xl">emoji_events</span>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between rounded-lg bg-slate-100 p-4 transition-all hover:bg-slate-200">
                                <div class="flex items-center gap-3"><span class="text-lg font-semibold text-slate-700">1.</span><p class="text-slate-700 font-medium">Oyuncu1</p></div>
                                <p class="font-semibold text-slate-700">10/10</p>
                            </div>
                             <div class="flex items-center justify-between rounded-lg bg-slate-100 p-4 transition-all hover:bg-slate-200">
                                <div class="flex items-center gap-3"><span class="text-lg font-semibold text-slate-700">2.</span><p id="yourLeaderboardName" class="text-slate-700 font-medium">SEN</p></div>
                                <p id="yourLeaderboardScore" class="font-semibold text-slate-700">0/0</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="sticky bottom-0 bg-white/80 backdrop-blur-md p-4 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
                <div class="mx-auto flex max-w-md flex-col gap-3">
                    <button id="playAgainBtn" class="flex h-12 w-full items-center justify-center rounded-full bg-[#dce8f3] px-5 text-base font-bold text-slate-900 tracking-wide shadow-sm transition-colors hover:bg-[#c9d9e9] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#dce8f3]">
                        <span class="material-symbols-outlined mr-2">replay</span>Tekrar Oyna
                    </button>
                    <button id="backToHomeResultsBtn" class="flex h-12 w-full items-center justify-center rounded-full bg-slate-200 px-5 text-base font-bold text-slate-700 tracking-wide shadow-sm transition-colors hover:bg-slate-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400">
                        <span class="material-symbols-outlined mr-2">home</span>Ana Sayfaya Dön
                    </button>
                </div>
            </footer>
        </div>

    </div> <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Ana Ekran Elementleri
        const homeScreenDiv = document.getElementById('homeScreen');
        const playNowButton = document.getElementById('playNowBtn');
        const howToPlayButton = document.getElementById('howToPlayBtn');
        const leaderboardBtnHome = document.getElementById('leaderboardBtnHome');
        // Modal Elementleri
        const modal = document.getElementById('howToPlayModal'); // Bu 'howToPlayModal'ı temsil ediyor
        const closeModalButton = document.getElementById('closeModalBtn'); // Modal içindeki 'X' butonu
        
        // Oyun Ekranı Elementleri
        const gameScreenDiv = document.getElementById('gameScreen');
        const closeGameButton = document.getElementById('closeGameBtn');
        const currentQuestionDisplay = document.getElementById('currentQuestionDisplay');
        const totalQuestionsDisplay = document.getElementById('totalQuestionsDisplay');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const progressBar = document.getElementById('progressBar');
        const timerMinutes = document.getElementById('timerMinutes');
        const timerSeconds = document.getElementById('timerSeconds');
        const newsImage = document.getElementById('newsImage');
        const newsTitleElement = document.getElementById('newsTitle');
        const newsSnippet = document.getElementById('newsSnippet');
        const verifySourceButton = document.getElementById('verifySourceButton');
        const fakeButton = document.getElementById('fakeButton');
        const realButton = document.getElementById('realButton');

        // Süre Doldu Pop-up Elementleri
        const timeUpPopup = document.getElementById('timeUpPopup');
        const timeUpOkButton = document.getElementById('timeUpOkButton');

        // Geri Bildirim Ekranı Elementleri
        const feedbackScreen = document.getElementById('feedbackScreen');
        const closeFeedbackBtn = document.getElementById('closeFeedbackBtn');
        const feedbackIcon = document.getElementById('feedbackIcon');
        const feedbackTitle = document.getElementById('feedbackTitle');
        const feedbackBox = document.getElementById('feedbackBox');
        const feedbackText = document.getElementById('feedbackText');
        const feedbackSourceSection = document.getElementById('feedbackSourceSection');
        const feedbackSourceLinkTag = document.getElementById('feedbackSourceLinkTag');
        const feedbackSourceName = document.getElementById('feedbackSourceName');
        const feedbackNextButton = document.getElementById('feedbackNextButton');

        // Sonuçlar Ekranı Elementleri
        const resultsScreen = document.getElementById('resultsScreen');
        const finalScoreValue = document.getElementById('finalScoreValue');
        const timeTakenValue = document.getElementById('timeTakenValue');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const backToHomeResultsBtn = document.getElementById('backToHomeResultsBtn');
        const closeResultsHeaderBtn = document.getElementById('closeResultsHeaderBtn');
        const yourLeaderboardScore = document.getElementById('yourLeaderboardScore');

        // Navigasyon Butonları
        const homeNavHome = document.getElementById('homeNavHome');
        const homeNavScores = document.getElementById('homeNavScores');
        const gameNavHome = document.getElementById('gameNavHome');
        const gameNavScores = document.getElementById('gameNavScores');

        // Önceki yanıttaki newsData ve diğer oyun değişkenleri/fonksiyonları buraya gelecek...
        const newsData = [
            { id: 1, title: "Fatih'te çanak anten düştü: 1 yaralı", snippet: "Fatih'te sokakta yürüyen bir kişinin üzerine binanın çatısında bulunan çanak anten düştü...", image: "https://i.gzt.com/i/gl/21/219663_1200xD.jpg", link: "https://www.gzt.com/video/jurnalist/sokakta-yururken-uzerine-canak-anten-dustu-2258619", isReal: true, explanation: "Bu haber gerçektir. Olay, güvenlik kamerası kayıtları ve görgü tanıklarının ifadeleriyle doğrulanmış, birçok haber kaynağında yer almıştır.", displaySourceName: "GZT Video", displaySourceLink: "https://www.gzt.com/video/jurnalist/sokakta-yururken-uzerine-canak-anten-dustu-2258619" },
            { id: 2, title: "Bilim İnsanları: Ay'da Kola Nehri Bulundu!", snippet: "NASA'nın son keşif aracı, Ay yüzeyinde akışkan halde bir kola nehri tespit etti...", image: "https://images.unsplash.com/photo-1567609593820-739083901303?q=80&w=800&auto=format&fit=crop", link: "#fake-news-1", isReal: false, explanation: "Bu haber sahtedir. Ay'da kola nehri bulunduğuna dair bilimsel bir kanıt veya güvenilir bir rapor bulunmamaktadır." },
            { id: 3, title: "Uzmanlar Uyardı: Fazla Egzersiz Zekayı Azaltıyor!", snippet: "Günde 2 saatten fazla yoğun egzersiz yapan bireylerde IQ seviyesinde düşüş gözlemlendiği iddia edildi.", image: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?q=80&w=800&auto=format&fit=crop", link: "#fake-news-2", isReal: false, explanation: "Bu iddia bilimsel dayanaktan yoksundur. Düzenli egzersizin bilişsel fonksiyonlar üzerinde olumlu etkileri olduğu bilinmektedir." },
            { id: 4, title: "Türkiye, 2030 Kış Olimpiyatları İçin Aday", snippet: "Türkiye Milli Olimpiyat Komitesi, 2030 Kış Olimpiyatları için Erzurum'un adaylık başvurusunu sundu.", image: "https://images.unsplash.com/photo-1600054836759-e8c36928855a?q=80&w=800&auto=format&fit=crop", link: "https://www.trthaber.com/haber/spor/erzurum-ve-saraybosnadan-2030-kis-olimpiyatlari-icin-is-birligi-750658.html", isReal: true, explanation: "Bu haber doğrudur. Türkiye'nin Kış Olimpiyatları için adaylık süreçleri olmuştur.", displaySourceName: "TRT Haber (Örnek)", displaySourceLink: "https://www.trthaber.com/haber/spor/" }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let timerInterval;
        let timeLeft = 15;
        const TIME_PER_QUESTION = 15;
        let gameStartTime;
        let gamePlayedAtLeastOnce = false;

        function showScreen(screenToShow) {
            const allScreens = [homeScreenDiv, gameScreenDiv, feedbackScreen, resultsScreen, timeUpPopup, modal]; // modal'ı da ekledik
            allScreens.forEach(s => {
                if (s) {
                    s.classList.add('hidden');
                    s.classList.remove('flex'); // Eğer flex ile gösteriliyorsa kaldır
                }
            });

            if (screenToShow) {
                 screenToShow.classList.remove('hidden');
                 // Belirli ekranlar flex ile gösterilmeli
                 if (screenToShow === homeScreenDiv || screenToShow === gameScreenDiv || 
                     screenToShow === feedbackScreen || screenToShow === resultsScreen ||
                     screenToShow === timeUpPopup || screenToShow === modal) {
                    screenToShow.classList.add('flex');
                 }
            }
            if (screenToShow !== modal && screenToShow !== timeUpPopup) { // Modal veya popup gösterilmiyorsa sayfa başına git
                window.scrollTo(0,0);
            }
        }

        function updateUIForNewQuestion() { /* ... (önceki gibi) ... */ 
            if (!newsData || newsData.length === 0) { console.error("Haber verisi bulunamadı!"); return; }
            if (currentQuestionIndex >= newsData.length) { endGame(); return; }
            
            const question = newsData[currentQuestionIndex];
            newsImage.src = question.image;
            newsTitleElement.textContent = question.title;
            newsSnippet.textContent = question.snippet;
            verifySourceButton.dataset.link = question.link;
            currentQuestionDisplay.textContent = currentQuestionIndex + 1;
            const progress = ((currentQuestionIndex) / newsData.length) * 100;
            progressBar.style.width = `${progress}%`;
            fakeButton.classList.remove('news-button-disabled');
            realButton.classList.remove('news-button-disabled');
        }

        function startTimer() { /* ... (önceki gibi) ... */
            timeLeft = TIME_PER_QUESTION;
            timerSeconds.textContent = timeLeft < 10 ? `0${timeLeft}` : timeLeft;
            timerMinutes.textContent = "00";
            
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerSeconds.textContent = timeLeft < 10 ? `0${timeLeft}` : timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showTimeUpPopup();
                }
            }, 1000);
         }

        function showTimeUpPopup() { /* ... (önceki gibi) ... */ 
            fakeButton.classList.add('news-button-disabled'); 
            realButton.classList.add('news-button-disabled');
            showScreen(timeUpPopup);
        }

        timeUpOkButton.addEventListener('click', () => { /* ... (önceki gibi) ... */
            // timeUpPopup.classList.add('hidden'); // showScreen halledecek
            // timeUpPopup.classList.remove('flex');
            handleAnswer(null); 
        });
        
        function handleAnswer(userChoiceIsReal) { /* ... (İSTEK 1 GÜNCELLEMESİ İLE ÖNCEKİ GİBİ) ... */
            clearInterval(timerInterval);
            fakeButton.classList.add('news-button-disabled');
            realButton.classList.add('news-button-disabled');

            const currentQuestion = newsData[currentQuestionIndex];
            const wasCorrect = userChoiceIsReal === currentQuestion.isReal;

            if (userChoiceIsReal !== null && wasCorrect) { score++; }
            scoreDisplay.textContent = score;

            feedbackIcon.className = "material-icons-outlined"; 
            feedbackBox.className = "rounded-lg bg-white p-5 sm:p-6 shadow-lg mb-6 sm:mb-8";
            feedbackSourceSection.classList.add('hidden');
            let feedbackStr = "";

            if (userChoiceIsReal === null) {
                feedbackTitle.textContent = "Süre Bitti!";
                feedbackIcon.textContent = "timer_off";
                feedbackIcon.classList.add('timeup-icon');
                feedbackBox.classList.add('incorrect-feedback'); 
                feedbackStr = `Bu soru için süreniz doldu. Doğru cevap: <strong>${currentQuestion.isReal ? 'GERÇEK' : 'SAHTE'}</strong> idi.<br><br>${currentQuestion.explanation || ''}`;
                if (currentQuestion.isReal && currentQuestion.displaySourceName && currentQuestion.displaySourceLink) {
                    feedbackSourceName.textContent = currentQuestion.displaySourceName;
                    feedbackSourceLinkTag.href = currentQuestion.displaySourceLink;
                    feedbackSourceSection.classList.remove('hidden');
                }
            } else if (wasCorrect) {
                feedbackTitle.textContent = "Bildin!"; // GÜNCELLENDİ
                feedbackIcon.textContent = "check_circle";
                feedbackIcon.classList.add('status-icon-correct');
                feedbackBox.classList.add('correct-feedback');
                feedbackStr = currentQuestion.explanation || (currentQuestion.isReal ? "Bu haber gerçekten doğru." : "Bu haberin sahte olduğunu doğru tespit ettin.");
            } else { 
                feedbackTitle.textContent = "Tekrar dene!"; // GÜNCELLENDİ
                feedbackIcon.textContent = "cancel";
                feedbackIcon.classList.add('status-icon-incorrect');
                feedbackBox.classList.add('incorrect-feedback');
                feedbackStr = `Doğru cevap <strong>${currentQuestion.isReal ? 'GERÇEK' : 'SAHTE'}</strong> olmalıydı.<br><br>${currentQuestion.explanation || ''}`;
                if (currentQuestion.displaySourceName && currentQuestion.displaySourceLink) {
                    feedbackSourceName.textContent = currentQuestion.displaySourceName;
                    feedbackSourceLinkTag.href = currentQuestion.displaySourceLink;
                    feedbackSourceSection.classList.remove('hidden');
                }
            }
            feedbackText.innerHTML = feedbackStr; 
            
            if (currentQuestionIndex >= newsData.length - 1) {
                feedbackNextButton.textContent = "Sonuçları Gör";
            } else {
                feedbackNextButton.textContent = "Sonraki Soru";
            }
            showScreen(feedbackScreen);
        }

        function proceedToNextStep() { /* ... (önceki gibi) ... */
            // feedbackScreen.classList.add('hidden'); // showScreen halledecek
            // feedbackScreen.classList.remove('flex');
            currentQuestionIndex++;
            const progressAfterAnswer = (currentQuestionIndex / newsData.length) * 100;
            progressBar.style.width = `${progressAfterAnswer}%`;

            if (currentQuestionIndex < newsData.length) {
                showScreen(gameScreenDiv);
                updateUIForNewQuestion();
                startTimer();
            } else {
                endGame();
            }
         }

        feedbackNextButton.addEventListener('click', proceedToNextStep);
        closeFeedbackBtn.addEventListener('click', proceedToNextStep);

        function startGame() { /* ... (önceki gibi, gameStartTime eklendi) ... */ 
            gameStartTime = Date.now();
            currentQuestionIndex = 0;
            score = 0;
            scoreDisplay.textContent = score;
            totalQuestionsDisplay.textContent = newsData.length;
            progressBar.style.width = '0%';
            showScreen(gameScreenDiv);
            updateUIForNewQuestion();
            startTimer();
        }

        function endGame() { /* ... (İSTEK 3 GÜNCELLEMESİ İLE ÖNCEKİ GİBİ) ... */
            gamePlayedAtLeastOnce = true; 
            clearInterval(timerInterval);
            const gameEndTime = Date.now();
            const timeDiff = gameEndTime - gameStartTime;
            const minutes = Math.floor(timeDiff / 60000);
            const seconds = Math.floor((timeDiff % 60000) / 1000);
            timeTakenValue.textContent = `${minutes} dakika ${seconds} saniye`;
            finalScoreValue.textContent = `${score}/${newsData.length}`;
            yourLeaderboardScore.textContent = `${score}/${newsData.length}`;
            showScreen(resultsScreen);
        }
        
        function resetGame() { /* ... (önceki gibi) ... */ clearInterval(timerInterval); }
        
        function navigateToHome() { /* ... (önceki gibi) ... */ resetGame(); showScreen(homeScreenDiv); }

        function navigateToResults() { /* ... (önceki gibi, "oyun oyna" mantığı ile) ... */
             if (!gamePlayedAtLeastOnce && resultsScreen) {
                const wantsToPlay = confirm("Henüz hiç oyun oynamadınız. Skorları görmek yerine oyuna başlamak ister misiniz?");
                if (wantsToPlay) { startGame(); } 
                else {
                    finalScoreValue.textContent = `0/${newsData.length}`;
                    timeTakenValue.textContent = `Oyun Oynanmadı`;
                    yourLeaderboardScore.textContent = `0/${newsData.length}`;
                    showScreen(resultsScreen);
                }
            } else if (resultsScreen) { 
                if(currentQuestionIndex < newsData.length && gameScreenDiv.classList.contains('hidden') === false && typeof timerInterval !== 'undefined'){ 
                     const wantsToEnd = confirm("Devam eden bir oyununuz var. Oyunu bitirip sonuçları görmek istediğinize emin misiniz?");
                     if(wantsToEnd) endGame(); else return;
                } else if(gamePlayedAtLeastOnce === false){ 
                    finalScoreValue.textContent = `0/${newsData.length}`;
                    timeTakenValue.textContent = `Oyun Oynanmadı`;
                    yourLeaderboardScore.textContent = `0/${newsData.length}`;
                    showScreen(resultsScreen);
                } else { 
                    // Oyun daha önce bittiyse veya devam etmiyorsa, skoru tekrar ayarla (endGame zaten yapıyor ama garanti olsun)
                    finalScoreValue.textContent = `${score}/${newsData.length}`; // mevcut skoru göster
                    const gameEndTime = Date.now(); // Eğer oyun bitmemişse bu yanlış olabilir, gameStartTime'a göre ayarlanmalı
                    if(gameStartTime){
                        const timeDiff = gameEndTime - gameStartTime; 
                        const minutes = Math.floor(timeDiff / 60000);
                        const seconds = Math.floor((timeDiff % 60000) / 1000);
                        timeTakenValue.textContent = `${minutes} dakika ${seconds} saniye`;
                    } else {
                         timeTakenValue.textContent = `Süre Hesaplanamadı`;
                    }
                    yourLeaderboardScore.textContent = `${score}/${newsData.length}`;
                    showScreen(resultsScreen);
                }
            }
        }

        // "Nasıl Oynanır?" Modal Event Listeners (GÜNCELLENDİ)
        if (howToPlayButton && modal && closeModalButton) {
            howToPlayButton.addEventListener('click', () => {
                if (modal) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                }
            });
            const closeHowToPlayModalAndGoHome = () => {
                if (modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
                navigateToHome(); // Ana ekrana dön
            };
            closeModalButton.addEventListener('click', closeHowToPlayModalAndGoHome);
            modal.addEventListener('click', (event) => {
                if (event.target === modal) { closeHowToPlayModalAndGoHome(); }
            });
        } else { console.error("Modal ('Nasıl Oynanır') elementleri bulunamadı."); }

        // Diğer Event Listeners
        if (playNowButton) { playNowButton.addEventListener('click', startGame); } 
        else { console.error('Play Now butonu (playNowBtn) bulunamadı!'); }

        if (closeGameButton) { closeGameButton.addEventListener('click', navigateToHome); } 
        else { console.error('Close Game butonu (closeGameBtn) bulunamadı!'); }
        
        if (fakeButton && realButton) {
            fakeButton.addEventListener('click', () => handleAnswer(false));
            realButton.addEventListener('click', () => handleAnswer(true));
        } else { console.error("Fake veya Real butonları bulunamadı."); }

        if(verifySourceButton){
            verifySourceButton.addEventListener('click', function() {
                const link = this.dataset.link;
                if(link && link !== "#" && (link.startsWith("http://") || link.startsWith("https://")) ){ window.open(link, '_blank'); } 
                else { alert("Bu haber için geçerli bir kaynak linki bulunmamaktadır."); }
            });
        }

        // Sonuçlar Ekranı Butonları
        if(playAgainBtn) playAgainBtn.addEventListener('click', startGame);
        if(backToHomeResultsBtn) backToHomeResultsBtn.addEventListener('click', navigateToHome);
        if(closeResultsHeaderBtn) closeResultsHeaderBtn.addEventListener('click', navigateToHome);

        // Ana Ekran Navigasyon
        if(homeNavHome) homeNavHome.addEventListener('click', (e) => { e.preventDefault(); navigateToHome();});
        if(homeNavScores) homeNavScores.addEventListener('click', (e) => { e.preventDefault(); navigateToResults();});
        if(leaderboardBtnHome) leaderboardBtnHome.addEventListener('click', (e) => { e.preventDefault(); navigateToResults();});

        // Oyun Ekranı Navigasyon
        if(gameNavHome) gameNavHome.addEventListener('click', (e) => { e.preventDefault(); navigateToHome();});
        if(gameNavScores) gameNavScores.addEventListener('click', (e) => { e.preventDefault(); navigateToResults();});

        // Başlangıçta ana ekranı göster
        showScreen(homeScreenDiv);
    });
    </script>
</body>
</html>
